<tool id="geec" name="GeEC Matrix">
  <description>creates a correlation matrix between many datasets</description>
  <command interpreter="python">
    geec.py
    --bigwigs
    #for i in $userData
      $i
    #end for
    --labels
    #for i in $userData
      $i.name
    #end for
    --md5s
    $ihecdata
    --include
    $include
    --exclude
    $exclude
    --bin
    $resolution
    --output
    $output
    --assembly
    $assembly
  </command>
  <requirements>
    <requirement type="package" version="0.1.0">geec</requirement>
  </requirements>
  <inputs>
    <param format="bigwig" name="userData" type="data" label="User's dataset(s)" optional="true" multiple="true" help="Formats currently supported: BigWig"/>
    
    <param format="json" name="ihecdata" type="data" label="Selected public datasets list file(s)" optional="true" multiple="false" help='List(s) containing public dataset IDs created through the "GeEC Public Datasets" selection tool'/>

    <conditional name="assembly_and_resolution">
      <param name="assembly" type="select" label="Assembly of the compared datasets" help="Any dataset from a different assembly will be ignored">
        <option value="hg19">hg19</option>
        <option value="saccer3">sacCer3</option>
      </param>
      <when value="hg19">
        <param name="resolution" type="select" label="Resolution of the comparison" help="Datasets are binned at this resolution before applying the next parameters">
          <option value="10000">10000</option>
        </param>
      </when>
      <when value="saccer3">
        <param name="resolution" type="select" label="Resolution of the comparison" help="Datasets are binned at this resolution before applying the next parameters">
          <option value="1000">10000</option>
        </param>
      </when>
    </conditional>

    <param name="include" type="select" label="Selection regions" help="The comparison will involve only bins overlapping with these regions">
      <option value="all">Whole genome</option>
    </param>

    <param name="exclude" type="select" label="Exclusion regions" help="The comparison will exclude bins overlapping these regions">
      <option value="blacklisted">Blacklisted</option>
      <option value="none">None</option>
    </param>

    <param name="metric" type="select" label="Correlation metric">
      <option value="pearson">Pearson</option>
    </param>

  </inputs>
  <outputs>
    <data format="tabular" name="output" />
  </outputs>

</tool>
